import 'package:routetest/backent/network_constants.dart';
import 'package:http/http.dart' as http;
import 'package:routetest/pages/activeNumbers/activePage.dart';

class activeNetwork {
  List<String> an = [
    "994776428183",
    "994773421144",
    "994773421145",
    "994773421244",
    // "994773621144",
    // "994703421144",
    // "994773421444",
    // "994773471144",
    // "994773428144",
    // "994706428183",
    // "994703421144",
    // "994703421145",
    // "994703421244",
    // "994703621144",
    // "994703421144",
    // "994703421444",
    // "994703471144",
    // "994706559981",
    // "994706559971",
    // "994706559961",
    // "994706559931",
    // "994706559871",
    // "994706559861",
    // "994706559831",
    // "994706559781",
    // "994706559741",
    // "994706559691",
    // "994706559611",
    // "994706559551",
    // "994706559521",
    // "994706559491",
    // "994706559481",
    // "994706559471",
    // "994706559431",
    // "994706559401",
    // "994706559391",
    // "994706559371",
    // "994706559361",
    // "994706559311",
    // "994706559271",
    // "994706559251",
    // "994706559231",
    // "994706559211",
    // "994706559201",
    // "994706559161",
    // "994706559131",
    // "994706559081",
    // "994706559061",
    // "994706559041",
    // "994706559031",
    // "994706558991",
    // "994706558951",
    // "994706558941",
    // "994706558921",
    // "994706558891",
    // "994706558871",
    // "994706558861",
    // "994706558841",
    // "994706550451",
    // "994706550431",
    // "994706550421",
    // "994706550391",
    // "994706550381",
    // "994706550371",
    // "994706550361",
    // "994706550321",
    // "994706550291",
    // "994706550281",
    // "994706550271",
    // "994706550241",
    // "994706550211",
    // "994706550161",
  ];

  List<String> activeNumberList = [];

  Future<void> activeNumbers() async {
    int counter = 0;

    try {
      for (int test = 0; test < an.length; test++) {
        print(counter);
        if (an.length < counter) break;
        //page

        var response = await http.get(
          getActiveNar(an[counter]),
          headers: await header(1),
        );

        if (response.statusCode == 200) {
          print(an[counter]);
          print(counter);
          // activeNumberList.add();
        } else if (response.statusCode == 401) {
          throw Exception("Key xətası ${response.statusCode}");
        } else {
          print("$counter");
        }
        counter++;
      }
      print("Bitdi: $counter");

      // ignore: empty_catches

    } on RangeError catch (_, e) {
      print(e);
    } catch (e) {
      print(e.toString());
    }
  }
}
